(function(t){function e(e){for(var a,o,c=e[0],i=e[1],l=e[2],d=0,p=[];d<c.length;d++)o=c[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&p.push(n[o][0]),n[o]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a]);u&&u(e);while(p.length)p.shift()();return s.push.apply(s,l||[]),r()}function r(){for(var t,e=0;e<s.length;e++){for(var r=s[e],a=!0,c=1;c<r.length;c++){var i=r[c];0!==n[i]&&(a=!1)}a&&(s.splice(e--,1),t=o(o.s=r[0]))}return t}var a={},n={app:0},s=[];function o(e){if(a[e])return a[e].exports;var r=a[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=a,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(r,a,function(e){return t[e]}.bind(null,a));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],i=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=i;s.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"26a3":function(t,e,r){},"30ce":function(t,e,r){t.exports=r.p+"img/qr-code.1334e06a.png"},4731:function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-app",[r("v-app-bar",{staticClass:"pa-0",attrs:{app:"",color:"primary",dense:"",dark:""}},[r("v-spacer"),r("v-toolbar-title",[r("div",{staticClass:"title txtbold"},[t._v("Hat Yai ATK Screening")])]),r("v-spacer")],1),r("v-main",{staticClass:"d-flex justify-center align-start"},[r("router-view")],1),r("v-footer",{attrs:{app:"",color:"primary",fixed:""}},[r("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[r("div",{staticClass:"foottxt txtbold"},[t._v(" Internet Thailand Public Company Limited ")])])],1)],1)],1)},s=[],o={mounted:function(){document.documentElement.style.overflow="hidden"}},c=o,i=(r("d485"),r("2877")),l=r("6544"),u=r.n(l),d=r("7496"),p=r("40dc"),v=r("62ad"),f=r("553a"),m=r("f6c4"),h=r("2fa4"),b=r("2a7f"),g=Object(i["a"])(c,n,s,!1,null,"6a8adc2f",null),w=g.exports;u()(g,{VApp:d["a"],VAppBar:p["a"],VCol:v["a"],VFooter:f["a"],VMain:m["a"],VSpacer:h["a"],VToolbarTitle:b["a"]});var x=r("9483");Object(x["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});var _=r("8c4f"),C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",["noscan"===t.whenshow?a("v-card",{attrs:{tile:"",elevation:"0",color:"#F5F5F5"}},[a("v-container",{attrs:{"grid-list-xs":"","fill-height":"",fluid:""}},[a("v-row",{},[a("v-col",{attrs:{cols:"12"}},[a("v-row",{staticClass:"pb-5 pt-5",attrs:{justify:"center",align:"center"}},[a("v-img",{attrs:{"max-width":"190",src:r("6428")}})],1),a("v-row",{attrs:{justify:"center",align:"center"}},[a("div",{staticClass:"titletxt txtbold"},[t._v(" การตั้งค่ากล่องเซ็นเซอร์คัดกรอง ")])]),a("v-row",{attrs:{justify:"center",align:"center"}},[a("div",{staticClass:"titletxt txtbold"},[t._v("โควิด-19")])])],1)],1),a("v-container",{staticClass:"pt-10",attrs:{"grid-list-xs":"",fluid:""}},["first"===t.step?a("v-card",{staticClass:"pt-1 pb-5 px-3",attrs:{color:"white",elevation:"10"}},[a("v-tabs",{attrs:{"background-color":"#FFFFFF",color:"primary","fixed-tabs":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab",[t._v("กรอกหมายเลขอุปกรณ์")]),a("v-tab",[t._v("สแกน QR")])],1),0===t.tab?a("v-container",{staticClass:"pa-0"},[a("v-row",{staticClass:"pt-10",attrs:{justify:"center"}},[a("v-col",{attrs:{cols:"11"}},[a("v-row",{staticClass:"txtsmall px-0",attrs:{justify:"center"}},[t._v(" กรอกหมายเลขอุปกรณ์ (Serial Number) ที่อยู่บนอุปกรณ์ ")]),a("v-row",{staticClass:"txtsmall",attrs:{justify:"center"}}),a("v-row",{attrs:{justify:"center"}},[a("div",{staticClass:"txtsmall"},[t._v("และกดปุ่ม")]),a("div",{staticClass:"registtxt txtbold"},[t._v('"ลงทะเบียน"')])]),a("v-row",{staticClass:"txtsmall",attrs:{justify:"center"}},[t._v(" เพื่อดำเนินการลงทะเบียนอุปกรณ์ ")])],1)],1),a("v-row",{staticClass:"pt-7",attrs:{justify:"center"}},[a("v-col",{staticClass:"pb-0 mb-0",attrs:{cols:"111"}},[a("v-text-field",{attrs:{dense:"",outlined:"",label:"หมายเลขอุปกรณ์ (Serial Number)"},model:{value:t.sn,callback:function(e){t.sn=e},expression:"sn"}})],1)],1),a("v-row",{staticClass:"mt-0"},[a("v-col",[a("v-btn",{staticClass:"secondary--text btntxt txtbold",attrs:{disabled:!t.btn,elevation:"0",block:"",color:"primary"},on:{click:t.check_sn_available}},[t._v("ลงทะเบียน")])],1)],1)],1):t._e(),1===t.tab?a("v-container",[a("v-row",{staticClass:"pt-5",attrs:{justify:"center"}},[a("v-col",{staticClass:"pb-0 mb-0 d-flex justify-center align-center",attrs:{cols:"111"}},[a("v-img",{attrs:{src:r("30ce"),"max-width":"200"}})],1)],1),a("v-row",{staticClass:"pt-10",attrs:{justify:"center"}},[a("v-col",{attrs:{cols:"11"}},[a("v-row",{staticClass:"txtsmall px-0",attrs:{justify:"center"}},[a("div",{staticClass:"txtsmall"},[t._v("กดปุ่ม")]),a("div",{staticClass:"registtxt txtbold"},[t._v('"สแกน QR code"')])]),a("v-row",{attrs:{justify:"center"}},[a("div",{staticClass:"txtsmall"},[t._v(" แล้วทำการสแกน QR code บนอุปกรณ์ของท่าน ")])])],1)],1),a("v-row",{staticClass:"pt-3",attrs:{justify:"center"}},[a("v-col",{attrs:{cols:"11"}},[a("v-row",{attrs:{justify:"center"}},[a("v-btn",{staticClass:"secondary--text btntxt",attrs:{elevation:"0",block:"",color:"primary"},on:{click:function(e){t.whenshow="scanning"}}},[t._v("สแกน QR code")])],1)],1)],1)],1):t._e()],1):t._e(),"second"===t.step?a("v-card",{staticClass:"pt-1 pb-10 px-3",attrs:{color:"white",elevation:"10"}},[a("v-row",{staticClass:"pt-10",attrs:{justify:"center"}},[a("v-col",{attrs:{cols:"11"}},[a("v-row",{staticClass:"txtsmall px-0",attrs:{justify:"center"}},[a("div",{staticClass:"txtsmall"},[t._v(" เลือกร้านค้าที่ต้องการลงเทียนกับอุปกรณ์หมายเลข ")])]),a("v-row",{attrs:{justify:"center"}},[a("div",{staticClass:"registtxt txtbold"},[t._v(t._s(t.sn))])])],1)],1),a("v-autocomplete",{staticClass:"pt-10",attrs:{items:t.merchant_data,outlined:"",dense:"",chips:"","small-chips":"",label:"เลือกร้านค้า","item-text":"merchant_name","item-value":"_id","append-icon":""},model:{value:t.selected_merchant,callback:function(e){t.selected_merchant=e},expression:"selected_merchant"}}),a("v-btn",{staticClass:"secondary--text btntxt",attrs:{elevation:"0",block:"",color:"primary"},on:{click:function(e){return t.regist(t.selected_merchant)}}},[t._v("ลงทะเบียนร้านค้า")])],1):t._e()],1)],1)],1):t._e(),a("v-dialog",{attrs:{transition:"dialog-bottom-transition"},model:{value:t.notiCard,callback:function(e){t.notiCard=e},expression:"notiCard"}},[t.err_handle?a("v-card",{staticClass:"text-center",attrs:{color:"white",height:"200"}},[a("v-row",{staticClass:"mx-0 px-0"},[a("v-col",{staticClass:"py-0 ma-0"},[a("sweetalert-icon",{attrs:{icon:"error"}})],1)],1),a("v-row",{staticClass:"mx-0 px-0 mt-0"},[a("v-col",{staticClass:"pb-0"},[0===t.err_msg?a("div",{staticClass:"txtreg"},[t._v(" เกิดข้อผิดพลาด กรุณาลองใหม่อีกครั้ง หรือติดต่อเจ้าหน้าที่ ")]):t._e(),1===t.err_msg?a("div",{staticClass:"txtreg"},[t._v(" ไม่พบอุปกรณ์ของท่าน โปรดตรวจสอบหมายเลขอุปกรณ์ (Serial Number) อีกครั้ง ")]):t._e()])],1)],1):a("v-card",{staticClass:"text-center",attrs:{color:"white",height:"200"}},[a("v-row",{staticClass:"mx-0 px-0"},[a("v-col",{staticClass:"py-0 ma-0"},[a("sweetalert-icon",{attrs:{icon:"success"}})],1)],1),a("v-row",{staticClass:"mx-0 px-0 mt-0"},[a("v-col",{staticClass:"pb-0"},[a("div",{staticStyle:{"font-size":"20px","font-weight":"bold"}},[t._v(" ลงทะเบียนสำเร็จ ")])])],1)],1)],1),a("loader"),a("v-card",["scanning"===t.whenshow?a("qrscan",{on:{result:t.get_merchant,close:t.closeScan,qrstr:t.set_sn,responseStatus:t.check_error}}):t._e()],1)],1)},y=[],j=r("1da1"),R=(r("96cf"),r("d3b7"),r("3ca3"),r("ddb0"),r("2b3d"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-overlay",{attrs:{value:t.loader}},[!0===t.loader?r("vue-loaders",{attrs:{name:"ball-spin-fade-loader",color:"#295939",scale:"1"}}):t._e()],1)],1)}),k=[],O={computed:{loader:function(){return this.$store.state.loader}}},S=O,$=r("a797"),V=Object(i["a"])(S,R,k,!1,null,"7e2fb7d4",null),F=V.exports;u()(V,{VOverlay:$["a"]});var E=r("2b45"),A=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-card",{staticClass:"mt-n5",attrs:{tile:"",elevation:"0",color:"#333333",height:"725"}},[r("v-container",{staticClass:"pt-16"},[r("v-row",{staticClass:"mt-16",attrs:{justify:"center"}},[r("v-col",[r("v-row",{attrs:{justify:"center"}},[r("qrcode-stream",{staticClass:"my-5 pa-2",attrs:{id:"scanner"},on:{decode:t.onDecode,init:t.onInit}})],1)],1)],1)],1)],1)],1)},P=[],q=(r("b0c0"),{methods:{onInit:function(t){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t;case 3:r.next=8;break;case 5:r.prev=5,r.t0=r["catch"](0),"NotAllowedError"===r.t0.name?e.error="ERROR: you need to grant camera access permisson":"NotFoundError"===r.t0.name?e.error="ERROR: no camera on this device":"NotSupportedError"===r.t0.name?e.error="ERROR: secure context required (HTTPS, localhost)":"NotReadableError"===r.t0.name?e.error="ERROR: is the camera already in use?":"OverconstrainedError"===r.t0.name?e.error="ERROR: installed cameras are not suitable":"StreamApiNotSupportedError"===r.t0.name&&(e.error="ERROR: Stream API is not supported in this browser");case 8:case"end":return r.stop()}}),r,null,[[0,5]])})))()},onDecode:function(t){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function r(){var a,n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log(t),e.$store.commit("loading",!0),a=t.substr(3),console.log(a),n="http://203.151.164.229:8081/api/v1/atk/devices",s={Authorization:"$2a$12$PpO0HqBajBz9YSAiSG.eOutmsIPC45nEm4VsXGCnq4JmqZ4BNUZSy"},r.next=8,e.axios.get(n+"/"+a,{headers:s}).then((function(t){e.$store.commit("loading",!1),t.data.type&&(e.$emit("responseStatus",!0),e.$emit("qrstr",a),e.$emit("result",t.data),e.$emit("close"))})).catch((function(t){e.$store.commit("loading",!1),console.log(t),e.$emit("responseStatus",!1)}));case 8:case"end":return r.stop()}}),r)})))()}}}),I=q,N=(r("818b"),r("b0af")),T=r("a523"),B=r("0fd9"),D=Object(i["a"])(I,A,P,!1,null,"57190670",null),z=D.exports;u()(D,{VCard:N["a"],VCol:v["a"],VContainer:T["a"],VRow:B["a"]});var M={components:{loader:F,SweetalertIcon:E["a"],qrscan:z},data:function(){return{tab:0,selected_merchant:"",whenshow:"noscan",notiCard:!1,err_handle:!1,err_msg:0,sn:"",oneID:null,merchant_data:null,step:"first",btn_status:!1}},mounted:function(){var t=this;return Object(j["a"])(regeneratorRuntime.mark((function e(){var r,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=window.location.href,a=new URL(r),n=a.searchParams.get("onechat_token"),localStorage.setItem("token",n),e.next=6,t.get_onedata();case 6:case"end":return e.stop()}}),e)})))()},computed:{btn:function(){return this.btn_status}},watch:{sn:function(t){t.length>=10?this.btn_status=!0:this.btn_status=!1}},methods:{check_error:function(t){t||(this.err_handle=!0,this.err_msg=1,this.show_notiCard())},set_sn:function(t){this.sn=t},closeScan:function(){this.whenshow="noscan",this.step="second"},get_onedata:function(){var t=this;return Object(j["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r={source:localStorage.getItem("token")},a={Authorization:"Bearer A4c106a02df725292bdd6559178ca5e88d155e516115240368068c3ffd2149e48d2cb338c47a54d708bbc7536415a4fd1"},t.axios.post("https://chat-api.one.th/manage/api/v1/login_onechat_token",r,{headers:a}).then((function(e){t.oneID=e.data.account.profile.one_id}));case 3:case"end":return e.stop()}}),e)})))()},regist:function(t){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.$store.commit("loading",!0),a="https://uat-atkscreening.one.th/gov/api/v1/dashboard/user",n={user_id:e.oneID,serial_number:e.sn},r.next=5,e.axios.put(a,n,{params:{id:t}}).then((function(t){"success"===t.data.status&&(e.$store.commit("loading",!1),e.show_notiCard(),e.step="first",e.sn="",e.selected_merchant="")})).catch((function(t){e.$store.commit("loading",!1),console.log(t),e.err_handle=!0}));case 5:case"end":return r.stop()}}),r)})))()},get_merchant:function(){var t=this;return Object(j["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r="https://uat-atkscreening.one.th/gov/api/v1/dashboard/user",e.next=3,t.axios.get(r,{params:{user_id:t.oneID}}).then(function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.merchant_data=r.data.data,t.step="second";case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.$store.commit("loading",!1),console.log(e),t.err_handle=!0}));case 3:case"end":return e.stop()}}),e)})))()},check_sn_available:function(){var t=this;return Object(j["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$store.commit("loading",!0),r="http://203.151.164.229:8081/api/v1/atk/devices",a={Authorization:"$2a$12$PpO0HqBajBz9YSAiSG.eOutmsIPC45nEm4VsXGCnq4JmqZ4BNUZSy"},e.next=5,t.axios.get(r+"/"+t.sn,{headers:a}).then(function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r.data.type){e.next=4;break}return e.next=3,t.get_merchant();case 3:t.$store.commit("loading",!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.err_handle=!0,t.err_msg=1,t.show_notiCard(),console.log(r),t.$store.commit("loading",!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)})))()},show_notiCard:function(){var t=this;this.notiCard=!0,setTimeout((function(){t.notiCard=!1,t.err_handle=!1,t.err_msg=0}),2500)}}},G=M,H=(r("6b7a"),r("c6a6")),J=r("8336"),Q=r("169a"),Z=r("adda"),U=r("71a3"),Y=r("fe57"),L=r("8654"),X=Object(i["a"])(G,C,y,!1,null,"51df438f",null),K=X.exports;u()(X,{VAutocomplete:H["a"],VBtn:J["a"],VCard:N["a"],VCol:v["a"],VContainer:T["a"],VDialog:Q["a"],VImg:Z["a"],VRow:B["a"],VTab:U["a"],VTabs:Y["a"],VTextField:L["a"]}),a["default"].use(_["a"]);var W=[{path:"/",name:"main",component:K}],tt=new _["a"]({mode:"history",base:"/",routes:W}),et=tt,rt=r("2f62");a["default"].use(rt["a"]);var at=new rt["a"].Store({state:{loader:!1,error:!1},mutations:{loading:function(t,e){t.loader=e},check_error:function(t,e){t.error=e}},actions:{},modules:{}}),nt=r("f309");a["default"].use(nt["a"]);var st=new nt["a"]({theme:{options:{customProperties:!0},themes:{light:{primary:"#5A926D",secondary:"#FFFFFF",greyC:"#CCCCCC",greyB:"#5A926D",greyF1:"#F1F1F1"}}}}),ot=r("bb6f"),ct=r.n(ot),it=r("bc3a"),lt=r.n(it),ut=r("2106"),dt=r.n(ut),pt=r("6cf9");r("cc73");a["default"].config.productionTip=!1,a["default"].use(ct.a),a["default"].use(dt.a,lt.a),a["default"].use(pt["a"]),a["default"].use(E["a"]),new a["default"]({router:et,store:at,vuetify:st,render:function(t){return t(w)}}).$mount("#app")},6428:function(t,e,r){t.exports=r.p+"img/inetlogo.0b3c61f1.png"},"6b7a":function(t,e,r){"use strict";r("70a7")},"70a7":function(t,e,r){},"818b":function(t,e,r){"use strict";r("4731")},d485:function(t,e,r){"use strict";r("26a3")}});
//# sourceMappingURL=app.01f53690.js.map